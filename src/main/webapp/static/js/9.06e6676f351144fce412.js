webpackJsonp([9],{r9Iy:function(e,o){},wTGC:function(e,o,l){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=l("OOvn"),n={data:function(){return{loginInfo:{},loginRules:{loginName:[{required:!0,trigger:["blur","change"],validator:function(e,o,l){if(!o)return l(new Error("不可为空"));if(!/^[0-9a-zA-Z]+$/.test(o))return l(new Error("账号只可为数字与字母"));l()}},{max:11,message:"密码长度最少为11位",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:["blur","change"]},{min:5,message:"密码长度最少为6位",trigger:["blur","change"]}],identityType:[{required:!0,message:"不可为空",trigger:["blur","change"]}],name:[{required:!0,message:"不可为空",trigger:["blur","change"]}],papersType:[{required:!0,message:"不可为空",trigger:["blur","change"]}],code:[{required:!0,message:"不可为空",trigger:["blur","change"]}],userType:[{required:!0,message:"不可为空",trigger:["blur","change"]}],papersNum:[{required:!0,message:"不可为空",trigger:["blur","change"]}],company:[{required:!0,message:"不可为空",trigger:["blur","change"]}],office:[{required:!0,message:"不可为空",trigger:["blur","change"]}],duty:[{required:!0,message:"不可为空",trigger:["blur","change"]}]},show:!0,count:"",timer:null,labelPostion:"right",options:[{value:"1",label:"团员"},{value:"2",label:"党员"},{value:"3",label:"群众"}],cardOptions:[{value:"1",label:"身份证"},{value:"2",label:"驾驶证"}],userOptions:[{value:"1",label:"申请人"},{value:"2",label:"职业人士"}]}},methods:{getCode:function(e){var o=this;this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){o.count>0&&o.count<=60?o.count--:(o.show=!0,clearInterval(o.timer),o.timer=null)},1e3))},submitForm:function(e){var o=this;this.$refs[e].validate(function(e){e&&Object(t.i)(o.loginInfo).then(function(e){if("200"==e.status){o.$message({showClose:!0,message:"注册成功！",type:"success"});var l=e.data;Object(t.g)({username:l.loginName,password:o.loginInfo.password,code:o.loginInfo.code}).then(function(e){"200"==e.status?(o.$store.commit("SET_MENU",e.data),o.$router.push({path:"/index"})):o.$message({showClose:!0,message:e.msg,type:"error"})})}else o.$message({showClose:!0,message:e.msg,type:"error"})})})}},mounted:function(){}},a={render:function(){var e=this,o=e.$createElement,l=e._self._c||o;return l("div",{staticClass:"userRegister"},[l("p",{staticClass:"regLogin"},[e._v("如有账号，可"),l("el-button",{attrs:{type:"text"}},[e._v("立即登录")])],1),e._v(" "),l("el-form",{ref:"loginInfo",staticClass:"demo-ruleForm",attrs:{model:e.loginInfo,rules:e.loginRules,"label-position":e.labelPostion,"label-width":"100px"},nativeOn:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.submitForm("loginInfo")}}},[l("div",{staticClass:"regForm"},[l("h1",[e._v("账号设置"),l("span",[e._v("请设置个人信息与手机号登录")])]),e._v(" "),l("el-form-item",{attrs:{label:"身份类型",prop:"identityType"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.loginInfo.identityType,callback:function(o){e.$set(e.loginInfo,"identityType",o)},expression:"loginInfo.identityType"}},e._l(e.options,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"姓名",prop:"name"}},[l("el-input",{attrs:{size:"medium",placeholder:"姓名"},model:{value:e.loginInfo.name,callback:function(o){e.$set(e.loginInfo,"name",o)},expression:"loginInfo.name"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"证件类型",prop:"papersType"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.loginInfo.papersType,callback:function(o){e.$set(e.loginInfo,"papersType",o)},expression:"loginInfo.papersType"}},e._l(e.cardOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"证件号码",prop:"papersNum"}},[l("el-input",{attrs:{size:"medium",placeholder:"证件号码"},model:{value:e.loginInfo.papersNum,callback:function(o){e.$set(e.loginInfo,"papersNum",o)},expression:"loginInfo.papersNum"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"手机号",prop:"loginName"}},[l("el-input",{attrs:{size:"medium",placeholder:"手机号/账号"},model:{value:e.loginInfo.loginName,callback:function(o){e.$set(e.loginInfo,"loginName",o)},expression:"loginInfo.loginName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"验证码",prop:"code"}},[l("el-input",{attrs:{size:"medium",prop:"code",placeholder:"验证码"},model:{value:e.loginInfo.code,callback:function(o){e.$set(e.loginInfo,"code",o)},expression:"loginInfo.code"}}),e._v(" "),l("button",{staticClass:"code-btn",attrs:{size:"medium",disabled:!e.show},on:{click:function(o){return e.getCode(e.loginInfo)}}},[l("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[e._v("发送验证码")]),e._v(" "),l("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(e._s(e.count)+" s")])])],1),e._v(" "),l("el-form-item",{attrs:{label:"密码",prop:"password"}},[l("el-input",{attrs:{size:"medium","prefix-icon":"el-icon-lock",type:"password",placeholder:"密码"},model:{value:e.loginInfo.password,callback:function(o){e.$set(e.loginInfo,"password",o)},expression:"loginInfo.password"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"用户类型",prop:"userType"}},[l("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.loginInfo.userType,callback:function(o){e.$set(e.loginInfo,"userType",o)},expression:"loginInfo.userType"}},e._l(e.userOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("div",{staticClass:"company"},[l("h1",[e._v("单位信息"),l("span",[e._v("请填写单位信息")])]),e._v(" "),l("el-form-item",{attrs:{label:"单位名称",prop:"company"}},[l("el-input",{attrs:{size:"medium",type:"text",placeholder:"手机号/账号"},model:{value:e.loginInfo.company,callback:function(o){e.$set(e.loginInfo,"company",o)},expression:"loginInfo.company"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"科室",prop:"office"}},[l("el-input",{attrs:{size:"medium",type:"text",placeholder:"密码"},model:{value:e.loginInfo.office,callback:function(o){e.$set(e.loginInfo,"office",o)},expression:"loginInfo.office"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"职务",prop:"duty"}},[l("el-input",{attrs:{size:"medium",type:"text",placeholder:"手机号/账号"},model:{value:e.loginInfo.duty,callback:function(o){e.$set(e.loginInfo,"duty",o)},expression:"loginInfo.duty"}})],1)],1),e._v(" "),l("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(o){return e.submitForm("loginInfo")}}},[e._v("立即注册")])],1)])],1)},staticRenderFns:[]};var r=l("VU/8")(n,a,!1,function(e){l("r9Iy")},"data-v-036d5dea",null);o.default=r.exports}});
//# sourceMappingURL=9.06e6676f351144fce412.js.map