<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sayee.sxsy.api.consult.dao.ConsultDao">
    <insert id="insert">
		INSERT INTO CMS_CONSULT(
			consult_id,
			name,
			content,
			uid,
			create_date,
			update_date
		) VALUES (
			#{consultId},
			#{name},
			#{content},
			#{uid},
			#{createDate},
			#{updateDate}
		)
	</insert>
	<select id="getConsultList" resultType="com.sayee.sxsy.api.consult.entity.ConsultEntity">
		SELECT CMS_CONSULT.consult_id as consultId,CMS_CONSULT.name,CMS_CONSULT.content,CMS_CONSULT.reply,CMS_CONSULT.replydate,CMS_CONSULT.create_date as createDate,CMS_WECHATUSER.workunit FROM CMS_CONSULT LEFT JOIN CMS_WECHATUSER ON CMS_CONSULT.uid=CMS_WECHATUSER.wechat_user_id
	</select>
	<select id="getConsultListByUid" parameterType="java.lang.String" resultType="com.sayee.sxsy.api.consult.entity.ConsultEntity">
		SELECT CMS_CONSULT.consult_id as consultId,CMS_CONSULT.name,CMS_CONSULT.content,CMS_CONSULT.reply,CMS_CONSULT.replydate,CMS_CONSULT.create_date as createDate,CMS_WECHATUSER.workunit FROM CMS_CONSULT LEFT JOIN CMS_WECHATUSER ON CMS_CONSULT.uid=CMS_WECHATUSER.wechat_user_id WHERE CMS_CONSULT.uid=#{uid}
	</select>
	<update id="reply" parameterType="java.util.Map">
		UPDATE CMS_CONSULT SET reply=#{reply},reply_uid = #{replyUid},replydate = #{replyDate} WHERE consult_id=#{consultId}
	</update>
</mapper>